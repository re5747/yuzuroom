<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Yuzu Room</title>
<link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <h1>é€²è·¯å¦¨å®³ãƒ‘ã‚ºãƒ«</h1>
  <div class="grid" id="grid"></div>
  <button onclick="setMode('obstacle')">ğŸ§± éšœå®³ç‰©ã‚’ç½®ã</button>
  <button onclick="startGame()">â–¶ ã‚¹ã‚¿ãƒ¼ãƒˆ</button>

  <script>
    const size = 6;
    const grid = document.getElementById('grid');
    let mode = 'obstacle';
    let playerPos = { x: 0, y: 2 }; // åˆæœŸä½ç½®
    const goalPos = { x: 5, y: 3 };
    const direction = { x: 1, y: 0 }; // å³æ–¹å‘
    const cells = [];

    function createGrid() {
      grid.innerHTML = '';
      for (let y = 0; y < size; y++) {
        cells[y] = [];
        for (let x = 0; x < size; x++) {
          const div = document.createElement('div');
          div.className = 'cell';
          div.dataset.x = x;
          div.dataset.y = y;
          div.addEventListener('click', handleClick);
          grid.appendChild(div);
          cells[y][x] = { type: 'empty', el: div };
        }
      }
      updateCell(playerPos.x, playerPos.y, 'player');
      updateCell(goalPos.x, goalPos.y, 'goal');
    }

    function handleClick(e) {
      const x = parseInt(e.currentTarget.dataset.x);
      const y = parseInt(e.currentTarget.dataset.y);
      if (mode === 'obstacle' && (x !== playerPos.x || y !== playerPos.y)) {
        updateCell(x, y, 'obstacle');
      }
    }

    function updateCell(x, y, type) {
      const cell = cells[y][x];
      cell.type = type;
      cell.el.className = 'cell ' + type;
      cell.el.textContent = type === 'player' ? 'ğŸ§â€â™‚ï¸' : type === 'goal' ? 'ğŸ¯' : '';
    }

    function setMode(m) {
      mode = m;
    }

    function startGame() {
      let pos = { ...playerPos };
      let dir = { ...direction };
      const interval = setInterval(() => {
        const nextX = pos.x + dir.x;
        const nextY = pos.y + dir.y;

        if (nextX < 0 || nextX >= size || nextY < 0 || nextY >= size) {
          clearInterval(interval);
          alert('å£ã«ã¶ã¤ã‹ã‚Šã¾ã—ãŸï¼');
          return;
        }

        const nextCell = cells[nextY][nextX];
        if (nextCell.type === 'obstacle') {
          // å³ã«90åº¦æ›²ãŒã‚‹ï¼ˆx,yï¼‰â†’ï¼ˆ-y,xï¼‰
          const temp = dir.x;
          dir.x = -dir.y;
          dir.y = temp;
          return;
        }

        updateCell(pos.x, pos.y, 'empty');
        pos.x = nextX;
        pos.y = nextY;

        if (pos.x === goalPos.x && pos.y === goalPos.y) {
          updateCell(pos.x, pos.y, 'player');
          clearInterval(interval);
          alert('ã‚´ãƒ¼ãƒ«ã«åˆ°é”ï¼');
          return;
        }

        updateCell(pos.x, pos.y, 'player');
      }, 500);
    }

    createGrid();
  </script>
<header>
  Yuzu Room
</header>

<main>
  <h1>ã‚ˆã†ã“ãã€Yuzu Roomã¸</h1>
  <p>ã“ã“ã¯ã€ã‚†ãšã®é¦™ã‚Šã®ã‚ˆã†ã«ã‚„ã•ã—ãç©ã‚„ã‹ãªæ™‚é–“ãŒæµã‚Œã‚‹å ´æ‰€ã§ã™ã€‚<br>è‡ªåˆ†ã¨å‘ãåˆã„ã€å¿ƒã‚’è½ã¡ç€ã‘ã¦ãƒªãƒ©ãƒƒã‚¯ã‚¹ã§ãã‚‹ç©ºé–“ã‚’ãŠå±Šã‘ã—ã¾ã™ã€‚</p>
  <button>ã‚‚ã£ã¨çŸ¥ã‚‹</button>
</main>

<footer>
  &copy; 2025 Yuzu Room. All Rights Reserved.
</footer>

</body>
</html>

